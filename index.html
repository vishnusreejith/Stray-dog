<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stray Paws Identifier</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .upload-area {
            border: 2px dashed #cbd5e1;
            transition: all 0.3s ease;
        }
        .upload-area.dragover {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
    </style>
</head>
<body class="bg-slate-50 text-slate-800 flex flex-col items-center min-h-screen p-4">

    <div class="w-full max-w-2xl mx-auto bg-white rounded-2xl shadow-lg p-6 md:p-10 relative">
        <!-- Language Switcher -->
        <div id="lang-switcher" class="absolute top-4 right-4 flex gap-1 bg-slate-100 p-1 rounded-lg z-10">
            <button id="lang-en" class="px-3 py-1 text-sm font-semibold rounded-md bg-blue-600 text-white transition-colors">English</button>
            <button id="lang-ml" class="px-3 py-1 text-sm font-semibold rounded-md bg-transparent text-slate-600 transition-colors">മലയാളം</button>
        </div>

        <header class="text-center mb-8 pt-10">
            <div class="flex items-center justify-center gap-3 mb-2">
                 <svg class="w-10 h-10 text-amber-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M11.2495 16.3213C11.1666 16.313 11.079 16.3093 11 16.3093C10.921 16.3093 10.8334 16.313 10.7505 16.3213C7.03281 16.7112 4.50002 18.2936 4.50002 20.0633V20.4998H17.5V20.0633C17.5 18.2936 14.9672 16.7112 11.2495 16.3213ZM11 15.0001C14.3137 15.0001 17 12.3138 17 9.00009C17 5.68638 14.3137 3.00009 11 3.00009C7.68629 3.00009 5 5.68638 5 9.00009C5 12.3138 7.68629 15.0001 11 15.0001ZM11 13.0001C8.79086 13.0001 7 11.2092 7 9.00009C7 6.79095 8.79086 5.00009 11 5.00009C13.2091 5.00009 15 6.79095 15 9.00009C15 11.2092 13.2091 13.0001 11 13.0001Z"></path></svg>
                <h1 data-translate="title" class="text-3xl md:text-4xl font-bold text-slate-900">Stray Paws Identifier</h1>
            </div>
            <p data-translate="subtitle" class="text-slate-500 mt-2">Upload a photo to identify the breed of an Indian stray dog.</p>
        </header>

        <main>
            <!-- NEW: Cover Image Section -->
            <div class="mb-8">
                <img src="https://raw.githubusercontent.com/YOUR_USERNAME/YOUR_REPOSITORY/main/images%20(1).jpg" 
                     alt="A friendly Indian dog looking at the camera" 
                     class="w-full h-64 object-cover rounded-xl shadow-lg"
                     onerror="this.onerror=null;this.src='https://placehold.co/1200x400/9ca3af/ffffff?text=Image+of+a+friendly+dog';">
            </div>

            <!-- File Upload Section -->
            <div id="upload-container">
                <label for="dog-photo-upload" class="cursor-pointer">
                    <div id="upload-area" class="upload-area rounded-lg p-12 text-center">
                        <input type="file" id="dog-photo-upload" class="hidden" accept="image/*">
                        <div class="flex flex-col items-center justify-center">
                            <svg class="w-16 h-16 text-slate-400 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0l-3-3.75M12 9.75l3 3.75M3 17.25V6.75A2.25 2.25 0 015.25 4.5h13.5A2.25 2.25 0 0121 6.75v10.5A2.25 2.25 0 0118.75 19.5H5.25A2.25 2.25 0 013 17.25z" />
                            </svg>
                            <p data-translate="upload_text" class="font-semibold text-slate-700">Click to upload or drag and drop</p>
                            <p data-translate="upload_subtext" class="text-sm text-slate-500">PNG, JPG, or WEBP</p>
                        </div>
                    </div>
                </label>
                <p id="upload-error" class="text-red-500 text-sm mt-2 text-center hidden"></p>
            </div>

            <!-- Image Preview Section -->
            <div id="preview-container" class="hidden mt-6 text-center">
                <h2 data-translate="preview_title" class="text-xl font-semibold mb-4 text-slate-700">Your Uploaded Image</h2>
                <div class="relative inline-block">
                    <img id="image-preview" src="" alt="Preview of uploaded dog photo" class="max-w-full h-auto max-h-80 rounded-lg shadow-md">
                    <button id="remove-image-btn" class="absolute -top-3 -right-3 bg-white rounded-full p-1.5 shadow-lg text-slate-600 hover:text-red-500 hover:scale-110 transition-transform">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                    </button>
                </div>
                
                <div id="analysis-options" class="mt-6 border-t pt-6">
                    <h3 data-translate="hint_title" class="text-lg font-semibold text-slate-800 mb-3">What does the dog look like?</h3>
                    <p data-translate="hint_subtitle" class="text-sm text-slate-500 mb-4">Give our simulation a hint for a more accurate result.</p>
                    
                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
                        <button data-hint="rajapalayam" data-translate="hint_rajapalayam" class="w-full bg-slate-200 text-slate-800 font-semibold py-3 px-4 rounded-lg hover:bg-slate-300 transition-all duration-300 text-sm">White coat, lean body</button>
                        <button data-hint="kombai" data-translate="hint_kombai" class="w-full bg-slate-200 text-slate-800 font-semibold py-3 px-4 rounded-lg hover:bg-slate-300 transition-all duration-300 text-sm">Reddish-brown coat</button>
                        <button data-hint="bakharwal" data-translate="hint_bakharwal" class="w-full bg-slate-200 text-slate-800 font-semibold py-3 px-4 rounded-lg hover:bg-slate-300 transition-all duration-300 text-sm">Fluffy, heavy coat</button>
                        <button data-hint="kanni" data-translate="hint_kanni" class="w-full bg-slate-200 text-slate-800 font-semibold py-3 px-4 rounded-lg hover:bg-slate-300 transition-all duration-300 text-sm">Black & Tan coat</button>
                        <button data-hint="mudhol" data-translate="hint_mudhol" class="w-full bg-slate-200 text-slate-800 font-semibold py-3 px-4 rounded-lg hover:bg-slate-300 transition-all duration-300 text-sm">Lean, athletic body</button>
                        <button data-hint="spitz" data-translate="hint_spitz" class="w-full bg-slate-200 text-slate-800 font-semibold py-3 px-4 rounded-lg hover:bg-slate-300 transition-all duration-300 text-sm">Small & fluffy, white</button>
                        <button data-hint="jonangi" data-translate="hint_jonangi" class="w-full bg-slate-200 text-slate-800 font-semibold py-3 px-4 rounded-lg hover:bg-slate-300 transition-all duration-300 text-sm">Wrinkled forehead</button>
                        <button data-hint="alangu" data-translate="hint_alangu" class="w-full bg-slate-200 text-slate-800 font-semibold py-3 px-4 rounded-lg hover:bg-slate-300 transition-all duration-300 text-sm">Very large, muscular</button>
                        <button data-hint="general" data-translate="hint_general" class="col-span-2 sm:col-span-4 w-full bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-700 transition-all duration-300 text-sm">Unsure / Other</button>
                    </div>
                </div>
            </div>

            <div id="result-section" class="mt-8 text-center hidden">
                <div id="loader-container" class="flex justify-center items-center">
                    <div class="loader"></div>
                    <p data-translate="loader_text" class="ml-4 text-slate-600 font-medium">Analyzing photo...</p>
                </div>
                
                <div id="result-content" class="hidden"></div>
            </div>

            <div class="mt-10 text-center text-xs text-slate-400">
                <p><strong data-translate="disclaimer_title">Disclaimer:</strong> <span data-translate="disclaimer_text">This is a demonstration tool. The breed identification is simulated and may not be accurate. For a real identification, please consult a veterinarian or an animal expert.</span></p>
            </div>
        </main>
    </div>

    <script>
        let currentLang = 'en';

        const translations = {
            en: {
                title: 'Stray Paws Identifier',
                subtitle: 'Upload a photo to identify the breed of an Indian stray dog.',
                upload_text: 'Click to upload or drag and drop',
                upload_subtext: 'PNG, JPG, or WEBP',
                preview_title: 'Your Uploaded Image',
                hint_title: 'What does the dog look like?',
                hint_subtitle: 'Give our simulation a hint for a more accurate result.',
                hint_rajapalayam: 'White coat, lean body',
                hint_kombai: 'Reddish-brown coat',
                hint_bakharwal: 'Fluffy, heavy coat',
                hint_kanni: 'Black & Tan coat',
                hint_mudhol: 'Lean, athletic body',
                hint_spitz: 'Small & fluffy, white',
                hint_jonangi: 'Wrinkled forehead',
                hint_alangu: 'Very large, muscular',
                hint_general: 'Unsure / Other',
                loader_text: 'Analyzing photo...',
                result_title: 'Analysis Complete',
                top_match: 'Top Match',
                confidence: 'Confidence',
                other_possibilities: 'Other Possibilities',
                disclaimer_title: 'Disclaimer:',
                disclaimer_text: 'This is a demonstration tool. The breed identification is simulated and may not be accurate. For a real identification, please consult a veterinarian or an animal expert.',
                upload_error_type: 'Please upload an image file (PNG, JPG).',
                upload_error_read: 'There was an error reading the file.'
            },
            ml: {
                title: 'തെരുവ് നായ്ക്കളുടെ ജാതിവൈവിധ്യം തിരിച്ചറിയാം',
                subtitle: 'ഒരു ഇന്ത്യൻ തെരുവ് നായയുടെ ഇനം തിരിച്ചറിയാൻ ഒരു ഫോട്ടോ അപ്‌ലോഡ് ചെയ്യുക.',
                upload_text: 'അപ്‌ലോഡ് ചെയ്യാൻ ക്ലിക്ക് ചെയ്യുക അല്ലെങ്കിൽ ഡ്രാഗ് & ഡ്രോപ്പ് ചെയ്യുക',
                upload_subtext: 'PNG, JPG, അല്ലെങ്കിൽ WEBP',
                preview_title: 'നിങ്ങൾ അപ്‌ലോഡ് ചെയ്ത ചിത്രം',
                hint_title: 'നായയെ കാണാൻ എങ്ങനെയാണ്?',
                hint_subtitle: 'കൃത്യമായ ഫലത്തിനായി ഞങ്ങളുടെ സിമുലേഷന് ഒരു സൂചന നൽകുക.',
                hint_rajapalayam: 'വെളുത്ത രോമം, മെലിഞ്ഞ ശരീരം',
                hint_kombai: 'ചുവപ്പ് കലർന്ന തവിട്ടുനിറം',
                hint_bakharwal: 'അധികം രോമമുള്ള ശരീരം',
                hint_kanni: 'കറുപ്പും തവിട്ടുനിറവും',
                hint_mudhol: 'മെലിഞ്ഞ, കായിക ശരീരം',
                hint_spitz: 'ചെറുതും വെളുത്തതും',
                hint_jonangi: 'ചുളിവുകളുള്ള നെറ്റി',
                hint_alangu: 'വളരെ വലുത്, പേശികളുള്ളത്',
                hint_general: 'ഉറപ്പില്ല / മറ്റുള്ളവ',
                loader_text: 'ഫോട്ടോ വിശകലനം ചെയ്യുന്നു...',
                result_title: 'വിശകലനം പൂർത്തിയായി',
                top_match: 'ഏറ്റവും യോജിച്ചത്',
                confidence: 'ആത്മവിശ്വാസം',
                other_possibilities: 'മറ്റ് സാധ്യതകൾ',
                disclaimer_title: 'നിരാകരണം:',
                disclaimer_text: 'ഇതൊരു ഡെമോൺസ്‌ട്രേഷൻ ടൂൾ ആണ്. ഇനം തിരിച്ചറിയൽ സിമുലേറ്റഡ് ആണ്, അത് കൃത്യമായിരിക്കണമെന്നില്ല. യഥാർത്ഥ തിരിച്ചറിയലിനായി, ദയവായി ഒരു മൃഗഡോക്ടറെയോ മൃഗ വിദഗ്ദ്ധനെയോ സമീപിക്കുക.',
                upload_error_type: 'ദയവായി ഒരു ഇമേജ് ഫയൽ അപ്‌ലോഡ് ചെയ്യുക.',
                upload_error_read: 'ഫയൽ വായിക്കുന്നതിൽ പിശകുണ്ടായി.'
            }
        };

        const breeds = [
            { id: 'indog', name: 'Indian Pariah Dog', name_ml: 'ഇന്ത്യൻ പരിയാ ഡോഗ്', description: 'A medium-sized dog with a wedge-shaped head, pointed muzzle, and erect ears. Their short double coat is usually fawn or reddish-brown. They are highly intelligent, alert, and adapted to the Indian subcontinent.', description_ml: 'ഇടത്തരം വലിപ്പമുള്ള ഈ നായകൾക്ക് കൂർത്ത തലയും, നീണ്ട മുഖവും, നിവർന്ന ചെവികളുമാണുള്ളത്. ഇവയുടെ ചെറിയ ഇരട്ട രോമങ്ങൾ സാധാരണയായി ഇളം തവിട്ടുനിറത്തിലോ ചുവപ്പ് കലർന്ന തവിട്ടുനിറത്തിലോ കാണപ്പെടുന്നു. ഉയർന്ന ബുദ്ധിയും ജാഗ്രതയുമുള്ള ഇവർ ഇന്ത്യൻ ഉപഭൂഖണ്ഡവുമായി ഇണങ്ങിച്ചേർന്നവരാണ്.', image: 'https://images.unsplash.com/photo-1593134257782-e895c7c7961c?w=600&q=80' },
            { id: 'rajapalayam', name: 'Rajapalayam', name_ml: 'രാജപാളയം', description: 'A large, elegant sighthound known for its pure milky-white coat, pink nose, and pale, often blue, eyes. They have a lean, muscular build with a tucked-up abdomen and a distinctive, regal gait.', description_ml: 'തൂവെള്ള രോമം, പിങ്ക് മൂക്ക്, വിളറിയ (പലപ്പോഴും നീല) കണ്ണുകൾ എന്നിവയ്ക്ക് പേരുകേട്ട ഒരു വലിയ വേട്ടനായ. മെലിഞ്ഞതും പേശികളോടുകൂടിയതുമായ ശരീരവും ഒതുങ്ങിയ വയറും രാജകീയമായ നടത്തവുമാണ് ഇവയുടെ സവിശേഷത.', image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Rajapalayam_dog_breed._IMG_20200208_131139.jpg/640px-Rajapalayam_dog_breed._IMG_20200208_131139.jpg' },
            { id: 'kombai', name: 'Kombai', name_ml: 'കൊമ്പൈ', description: 'A powerful and courageous dog with a muscular build. Its most defining feature is a reddish-brown coat paired with a distinct black mask over the muzzle that can extend to the eyes and ears.', description_ml: 'പേശികളോടുകൂടിയ ശരീരമുള്ള ശക്തനും ധൈര്യശാലിയുമായ നായ. ചുവപ്പ് കലർന്ന തവിട്ടുനിറത്തിലുള്ള രോമങ്ങളും മുഖത്ത് കറുത്ത മാസ്കുമാണ് ഇതിന്റെ ഏറ്റവും വലിയ പ്രത്യേകത. ഈ മാസ്ക് കണ്ണുകളിലേക്കും ചെവികളിലേക്കും വ്യാപിച്ചേക്കാം.', image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Kombai_Dog_at_its_Best.jpg/640px-Kombai_Dog_at_its_Best.jpg' },
            { id: 'bakharwal', name: 'Bakharwal Dog', name_ml: 'ബഖർവാൾ ഡോഗ്', description: 'A majestic, heavy-boned livestock guardian. They are characterized by a thick, fluffy double coat (often black and tan), a well-feathered tail that curls over the back, and a powerful, muscular body.', description_ml: 'മഹത്വമുള്ളതും ഭാരമേറിയ എല്ലുകളോടുകൂടിയതുമായ ഒരു കന്നുകാലി സംരക്ഷകൻ. കട്ടിയുള്ളതും മൃദുവായതുമായ ഇരട്ട രോമങ്ങളും (പലപ്പോഴും കറുപ്പും തവിട്ടുനിറവും), പുറകിലേക്ക് വളഞ്ഞ വാലും, ശക്തമായ ശരീരവുമാണ് ഇവയുടെ സവിശേഷത.', image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/c4/A_Bakharwal_Dog_Guarding_His_Goats.jpg/640px-A_Bakharwal_Dog_Guarding_His_Goats.jpg' },
            { id: 'mudhol', name: 'Mudhol Hound', name_ml: 'മുധോൾ ഹൗണ്ട്', description: 'An elegant sighthound with a long, narrow head and lean body built for speed and stamina. They have a short, fine coat in various colors and are known for their graceful, floating gait.', description_ml: 'വേഗതയ്ക്കും കായികക്ഷമതയ്ക്കും വേണ്ടി നിർമ്മിച്ച നീളമുള്ള, ഇടുങ്ങിയ തലയും മെലിഞ്ഞ ശരീരവുമുള്ള ഒരു സുന്ദരൻ വേട്ടനായ. പല നിറങ്ങളിലും കാണപ്പെടുന്ന ചെറിയ, മിനുസമാർന്ന രോമങ്ങളും മനോഹരമായ നടത്തവും ഇവയുടെ പ്രത്യേകതയാണ്.', image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/35/Mudhol_Hound_at_CRPF_Dog_breeding_and_training_school_Bengaluru.jpg/640px-Mudhol_Hound_at_CRPF_Dog_breeding_and_training_school_Bengaluru.jpg' },
            { id: 'chippiparai', name: 'Chippiparai', name_ml: 'ചിപ്പിപ്പാറൈ', description: 'A sleek, agile sighthound with a slender but muscular body and a tucked abdomen. They have a short, fine coat that can be fawn, reddish-brown, or brindle. Known for their loyalty and speed.', description_ml: 'മെലിഞ്ഞതും എന്നാൽ പേശികളോടുകൂടിയതുമായ ശരീരവും ഒതുങ്ങിയ വയറുമുള്ള ഒരു വേഗതയേറിയ വേട്ടനായ. ഇളം തവിട്ടുനിറം, ചുവപ്പ് കലർന്ന തവിട്ടുനിറം, അല്ലെങ്കിൽ വരകളോടുകൂടിയതുമായ ചെറിയ രോമങ്ങൾ ഇവയ്ക്കുണ്ട്. കൂറ്, വേഗത എന്നിവയ്ക്ക് പേരുകേട്ടതാണ്.', image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Chippiparai_Sighthound.jpg/640px-Chippiparai_Sighthound.jpg' },
            { id: 'gaddi', name: 'Gaddi Kutta', name_ml: 'ഗഡ്ഡി കുട്ട', description: 'A powerful, large mastiff-type mountain dog. They possess great strength, a thick double coat to withstand cold, and often a mane-like ruff of fur around their neck. Used for guarding.', description_ml: 'ശക്തനും വലുതുമായ ഒരു മാസ്റ്റിഫ് ഇനം പർവത നായ. കനത്ത തണുപ്പിനെ പ്രതിരോധിക്കാൻ കട്ടിയുള്ള ഇരട്ട രോമങ്ങളും കഴുത്തിന് ചുറ്റും സട പോലുള്ള രോമങ്ങളുമുണ്ട്. കാവലിനായി ഉപയോഗിക്കുന്നു.', image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Gaddi_Kutta_in_Manali%2C_India.jpg/640px-Gaddi_Kutta_in_Manali%2C_India.jpg' },
            { id: 'kanni', name: 'Kanni', name_ml: 'കന്നി', description: 'A rare and refined sighthound, closely related to the Chippiparai. They are known for their classic black-and-tan coat pattern. They have a graceful build, long legs, and a shy but loyal temperament.', description_ml: 'ചിപ്പിപ്പാറൈയുമായി അടുത്ത ബന്ധമുള്ള ഒരു അപൂർവയിനം വേട്ടനായ. കറുപ്പും തവിട്ടുനിറവുമുള്ള രോമങ്ങളാണ് ഇവയുടെ ക്ലാസിക് രൂപം. മനോഹരമായ ശരീരവും നീണ്ട കാലുകളും ലജ്ജാശീലവും എന്നാൽ വിശ്വസ്തവുമായ സ്വഭാവവുമുണ്ട്.', image: 'https://upload.wikimedia.org/wikipedia/commons/2/27/Kanni_Dog_img.jpeg' },
            { id: 'rampur', name: 'Rampur Greyhound', name_ml: 'രാംപൂർ ഗ്രേഹൗണ്ട്', description: 'A large, powerful sighthound built more robustly than other greyhounds. They have a short coat, often in mouse-grey, brindle, or black, and possess incredible speed over short distances.', description_ml: 'മറ്റ് ഗ്രേഹൗണ്ടുകളേക്കാൾ കരുത്തുറ്റ ശരീരമുള്ള ഒരു വലിയ വേട്ടനായ. ചെറിയ രോമങ്ങൾ, പലപ്പോഴും ചാരനിറത്തിലോ വരകളോടുകൂടിയോ കറുപ്പ് നിറത്തിലോ കാണപ്പെടുന്നു. കുറഞ്ഞ ദൂരത്തിൽ അവിശ്വസനീയമായ വേഗതയുണ്ട്.', image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Rampur_Greyhound_DSC_0356.jpg/640px-Rampur_Greyhound_DSC_0356.jpg' },
            { id: 'spitz', name: 'Indian Spitz', name_ml: 'ഇന്ത്യൻ സ്പിറ്റ്സ്', description: 'A small, fluffy companion dog resembling a Pomeranian but slightly larger. Key features are a pointed muzzle, erect triangular ears, a thick white coat, and a plumed tail that curls over the back.', description_ml: 'പോമറേനിയനോട് സാമ്യമുള്ളതും എന്നാൽ അല്പം വലുതുമായ ഒരു ചെറിയ സഹചാരി നായ. കൂർത്ത മുഖം, നിവർന്ന ത്രികോണാകൃതിയിലുള്ള ചെവികൾ, കട്ടിയുള്ള വെളുത്ത രോമങ്ങൾ, പുറകിലേക്ക് വളഞ്ഞ വാൽ എന്നിവയാണ് പ്രധാന സവിശേഷതകൾ.', image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/f8/Indian_Spitz_2.jpg/640px-Indian_Spitz_2.jpg' },
            { id: 'alangu', name: 'Alangu Mastiff', name_ml: 'അലങ്കു മാസ്റ്റിഫ്', description: 'Also known as the Bully Kutta, this is a very large and powerful mastiff. Known for its muscular build, loose skin around the neck, short coat, and dominant temperament. Requires experienced handling.', description_ml: 'ബുള്ളി കുട്ട എന്നും അറിയപ്പെടുന്ന ഇത് വളരെ വലുതും ശക്തനുമായ ഒരു മാസ്റ്റിഫാണ്. പേശികളോടുകൂടിയ ശരീരത്തിനും കഴുത്തിന് ചുറ്റുമുള്ള അയഞ്ഞ ചർമ്മത്തിനും പേരുകേട്ടതാണ്. പരിചയസമ്പന്നമായ കൈകാര്യം ചെയ്യൽ ആവശ്യമാണ്.', image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/Bully_Kutta_2016.jpg/640px-Bully_Kutta_2016.jpg' },
            { id: 'jonangi', name: 'Jonangi', name_ml: 'ജോനാംഗി', description: 'A unique dog with a wrinkled forehead and a very short, fine coat. They are known for digging burrows and a distinctive "yodeling" sound instead of barking. Found along the coasts of Andhra Pradesh.', description_ml: 'ചുളിവുകളുള്ള നെറ്റിയും വളരെ ചെറിയ രോമങ്ങളുമുള്ള ഒരു സവിശേഷ ഇന്ത്യൻ നായ. കുഴികൾ കുഴിക്കുന്നതിനും കുരയ്ക്കുന്നതിന് പകരം "യോഡലിംഗ്" ശബ്ദമുണ്ടാക്കുന്നതിനും പേരുകേട്ടതാണ്. ആന്ധ്രാപ്രദേശിന്റെ തീരങ്ങളിൽ കാണപ്പെടുന്നു.', image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Jonangi_dog.jpg/640px-Jonangi_dog.jpg' },
            { id: 'pandikona', name: 'Pandikona', name_ml: 'പണ്ടികോന', description: 'A primitive hunting dog from Andhra Pradesh. They are medium-sized with a short, harsh coat, often fawn or tan. Known for their stamina, guarding instincts, and ability to survive on little food.', description_ml: 'ആന്ധ്രാപ്രദേശിൽ നിന്നുള്ള ഒരു വേട്ടപ്പട്ടി. ഇടത്തരം വലിപ്പമുള്ള ഇവയ്ക്ക് ചെറുതും പരുക്കനുമായ രോമങ്ങളുണ്ട്. സഹനശക്തിക്കും കാവൽ കഴിവുകൾക്കും പേരുകേട്ടതാണ്.', image: 'https://upload.wikimedia.org/wikipedia/commons/4/4f/Pandikona_dog.jpg' },
            { id: 'vikhan', name: 'Vikhan Sheepdog', name_ml: 'വിഖാൻ ഷീപ്പ്ഡോഗ്', description: 'A shaggy, agile sheepdog from the Himalayan region. They have a long, thick coat to protect them from the harsh mountain climate and are excellent herders, similar to a Gaddi Kutta but smaller.', description_ml: 'ഹിമാലയൻ പ്രദേശത്ത് നിന്നുള്ള രോമങ്ങളുള്ള ഒരു ആട്ടിടയൻ നായ. പർവതങ്ങളിലെ കഠിനമായ കാലാവസ്ഥയിൽ നിന്ന് സംരക്ഷിക്കാൻ നീളമുള്ളതും കട്ടിയുള്ളതുമായ രോമങ്ങളുണ്ട്.', image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/1d/Banjara_Hound_in_His_Village.jpg/640px-Banjara_Hound_in_His_Village.jpg' },
            { id: 'mixed', name: 'Mixed Breed', name_ml: 'സങ്കരയിനം', description: 'A beautiful dog with a unique heritage from multiple breeds. Their appearance, size, and temperament can vary greatly, showcasing a wonderful mix of traits from their diverse ancestry.', description_ml: 'ഒന്നിലധികം ഇനങ്ങളിൽ നിന്നുള്ള സവിശേഷ പാരമ്പര്യമുള്ള ഒരു സുന്ദരനായ നായ. ഇവയുടെ രൂപം, വലുപ്പം, സ്വഭാവം എന്നിവ വളരെ വ്യത്യസ്തമായിരിക്കും, ഇത് അവരുടെ വൈവിധ്യമാർന്ന പാരമ്പര്യത്തിന്റെ മനോഹരമായ മിശ്രിതം കാണിക്കുന്നു.', image: 'https://images.unsplash.com/photo-1543466835-00a7907e9de1?w=600&q=80' },
        ];

        const uploadArea = document.getElementById('upload-area');
        const fileInput = document.getElementById('dog-photo-upload');
        const uploadContainer = document.getElementById('upload-container');
        const previewContainer = document.getElementById('preview-container');
        const imagePreview = document.getElementById('image-preview');
        const removeImageBtn = document.getElementById('remove-image-btn');
        const resultSection = document.getElementById('result-section');
        const loaderContainer = document.getElementById('loader-container');
        const resultContent = document.getElementById('result-content');
        const analysisOptions = document.getElementById('analysis-options');
        const langEnBtn = document.getElementById('lang-en');
        const langMlBtn = document.getElementById('lang-ml');
        const uploadError = document.getElementById('upload-error');
        
        function updateLanguage(lang) {
            currentLang = lang;
            document.querySelectorAll('[data-translate]').forEach(el => {
                const key = el.dataset.translate;
                if (translations[lang] && translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });
            langEnBtn.classList.toggle('bg-blue-600', lang === 'en');
            langEnBtn.classList.toggle('text-white', lang === 'en');
            langEnBtn.classList.toggle('bg-transparent', lang !== 'en');
            langEnBtn.classList.toggle('text-slate-600', lang !== 'en');
            langMlBtn.classList.toggle('bg-blue-600', lang === 'ml');
            langMlBtn.classList.toggle('text-white', lang === 'ml');
            langMlBtn.classList.toggle('bg-transparent', lang !== 'ml');
            langMlBtn.classList.toggle('text-slate-600', lang !== 'ml');
        }

        langEnBtn.addEventListener('click', () => updateLanguage('en'));
        langMlBtn.addEventListener('click', () => updateLanguage('ml'));

        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(e => {
            uploadArea.addEventListener(e, preventDefaults, false);
            document.body.addEventListener(e, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(e => {
            uploadArea.addEventListener(e, () => uploadArea.classList.add('dragover'), false);
        });

        ['dragleave', 'drop'].forEach(e => {
            uploadArea.addEventListener(e, () => uploadArea.classList.remove('dragover'), false);
        });

        uploadArea.addEventListener('drop', (e) => handleFiles(e.dataTransfer.files), false);
        fileInput.addEventListener('change', (e) => handleFiles(e.target.files));

        function handleFiles(files) {
            uploadError.classList.add('hidden');
            if (!files || files.length === 0) return;
            const file = files[0];
            if (!file.type.startsWith('image/')) {
                uploadError.textContent = translations[currentLang].upload_error_type;
                uploadError.classList.remove('hidden');
                fileInput.value = '';
                return;
            }
            const reader = new FileReader();
            reader.onload = e => {
                imagePreview.src = e.target.result;
                showPreview();
            };
            reader.onerror = () => {
                uploadError.textContent = translations[currentLang].upload_error_read;
                uploadError.classList.remove('hidden');
                fileInput.value = '';
            };
            reader.readAsDataURL(file);
        }
        
        function showPreview() {
            uploadContainer.classList.add('hidden');
            previewContainer.classList.remove('hidden');
            resultSection.classList.add('hidden');
            resultContent.classList.add('hidden');
        }
        
        function hidePreview() {
            uploadContainer.classList.remove('hidden');
            previewContainer.classList.add('hidden');
            resultSection.classList.add('hidden');
            fileInput.value = '';
        }

        removeImageBtn.addEventListener('click', hidePreview);
        
        analysisOptions.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                startAnalysis(e.target.dataset.hint);
            }
        });

        function startAnalysis(hint) {
            resultSection.classList.remove('hidden');
            resultContent.classList.add('hidden');
            loaderContainer.style.display = 'flex';
            resultSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            setTimeout(() => runSimulatedAnalysis(hint), 2500);
        }
        
        function runSimulatedAnalysis(hint) {
            let topMatch;
            let otherBreeds;
            if (hint && hint !== 'general') {
                topMatch = breeds.find(b => b.id === hint);
                otherBreeds = breeds.filter(b => b.id !== hint);
            } else {
                const shuffled = [...breeds].sort(() => 0.5 - Math.random());
                topMatch = shuffled[0];
                otherBreeds = shuffled.slice(1);
            }
            const shuffledOthers = otherBreeds.sort(() => 0.5 - Math.random());
            const secondGuess = shuffledOthers[0];
            const thirdGuess = shuffledOthers[1];
            displayResults(topMatch, secondGuess, thirdGuess);
        }
        
        function displayResults(top, second, third) {
            const topConf = Math.floor(Math.random() * 12) + 85;
            const secondConf = Math.floor(Math.random() * 16) + 60;
            const thirdConf = Math.floor(Math.random() * 16) + 40;
            loaderContainer.style.display = 'none';

            const topMatchHtml = `
                <h2 class="text-2xl font-bold text-slate-800 mb-4" data-translate="result_title">${translations[currentLang].result_title}</h2>
                <div class="bg-blue-50 border border-blue-200 p-4 md:p-6 rounded-lg text-left mb-6">
                    <p class="text-sm font-semibold text-blue-700 mb-2" data-translate="top_match">${translations[currentLang].top_match}</p>
                    <div class="md:flex md:items-start md:gap-6">
                        <div class="w-full md:w-1/2">
                             <img src="${top.image}" alt="Image of ${top.name}" class="w-full h-auto rounded-md shadow-sm mb-4">
                        </div>
                        <div class="md:w-1/2">
                            <h3 class="text-2xl font-bold text-blue-800">${currentLang === 'ml' ? top.name_ml : top.name}</h3>
                            <div class="w-full bg-slate-200 rounded-full h-2.5 my-3">
                                <div class="bg-blue-600 h-2.5 rounded-full" style="width: ${topConf}%"></div>
                            </div>
                            <p class="text-slate-700 font-semibold mb-3">${topConf}% <span data-translate="confidence">${translations[currentLang].confidence}</span></p>
                            <p class="text-slate-600 text-sm">${currentLang === 'ml' ? top.description_ml : top.description}</p>
                        </div>
                    </div>
                </div>
            `;

            const otherPossibilitiesHtml = `
                <h3 class="text-xl font-bold text-slate-700 mb-4 text-left" data-translate="other_possibilities">${translations[currentLang].other_possibilities}</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-left">
                    <div class="bg-slate-100 p-4 rounded-lg">
                        <h4 class="font-bold text-slate-800">${currentLang === 'ml' ? second.name_ml : second.name}</h4>
                        <p class="text-sm text-slate-600 mb-2">${secondConf}% <span data-translate="confidence">${translations[currentLang].confidence}</span></p>
                    </div>
                    <div class="bg-slate-100 p-4 rounded-lg">
                        <h4 class="font-bold text-slate-800">${currentLang === 'ml' ? third.name_ml : third.name}</h4>
                        <p class="text-sm text-slate-600 mb-2">${thirdConf}% <span data-translate="confidence">${translations[currentLang].confidence}</span></p>
                    </div>
                </div>
            `;
            
            resultContent.innerHTML = topMatchHtml + otherPossibilitiesHtml;
            resultContent.classList.remove('hidden');
        }
    </script>
</body>
</html>















